
Вот пример Python-скрипта, который использует библиотеки `os`, `psutil`, `time` и `iptables` для управления VPN-сервером. Если VPN-сервер перестает работать, скрипт автоматически добавляет правила в `iptables`, чтобы отключить устройства, подключенные через VPN.

Vpn Server Manager

### Описание работы скрипта:

1. **Функция `is_vpn_running`**:
    
    - Проверяет, работает ли процесс VPN с указанным именем (например, `openvpn`), используя библиотеку `psutil`.
2. **Функции `block_traffic` и `unblock_traffic`**:
    
    - Добавляют или очищают правила в `iptables` для блокировки или разблокировки трафика.
3. **Функция `monitor_vpn`**:
    
    - Постоянно проверяет, работает ли VPN, с заданным интервалом (`check_interval`).
    - Если VPN перестает работать, трафик блокируется. Если VPN снова запускается, трафик разблокируется.
4. **Основной блок**:
    
    - Указывает имя процесса VPN и интервал проверки. При завершении скрипта с помощью `Ctrl+C` трафик автоматически разблокируется.

Этот скрипт можно адаптировать под конкретные нужды, указав правильное имя процесса VPN-сервера и дополнительные правила `iptables`. Запускать скрипт рекомендуется с правами администратора.

