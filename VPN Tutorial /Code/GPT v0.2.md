Вот пример программы на Python для управления VPN-сервером WireGuard и отключения подключенных устройств, если сервер перестает работать. Для этого потребуется библиотека `psutil` (для проверки состояния процессов) и утилиты WireGuard, такие как `wg` для управления интерфейсами.

Vpn Server Manager

Вместо това отговорете в чата

### Объяснение кода:

1. **Проверка статуса WireGuard**: Функция `check_wireguard_status` запускает команду `wg show` для проверки доступности интерфейса WireGuard.
    
2. **Отключение клиентов**: Функция `disconnect_clients` получает список пиров через `wg show <интерфейс> peers` и удаляет их с помощью команды `wg set <интерфейс> peer <пир> remove`.
    
3. **Перезапуск интерфейса**: Функция `restart_wireguard` перезапускает интерфейс WireGuard с использованием `wg-quick down` и `wg-quick up`.
    
4. **Мониторинг**: В функции `monitor_vpn` осуществляется проверка статуса интерфейса каждые 5 секунд. Если сервер не доступен, отключаются клиенты, и интерфейс перезапускается.
    

### Как использовать:

1. Убедитесь, что у вас установлен WireGuard и доступна утилита `wg`.
2. Сохраните код в файл, например, `vpn_monitor.py`.
3. Запустите скрипт: `python3 vpn_monitor.py`.

> ⚠️ **Важно:** Для выполнения команд `wg` и `wg-quick` скрипт должен запускаться с правами администратора.


